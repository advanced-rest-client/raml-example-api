(function(){var importLocation="";(function(){var url;if(window.currentImport&&window.currentImport.URL){url=window.currentImport.URL;if(window.currentImport._URL)url=window.currentImport._URL}else if(window.currentImport._URL)url=window.currentImport._URL;else url=window.location.href;if(url==="about:blank")importLocation="../";else{var path=url.substr(url.indexOf("/",8));path=path.substr(0,path.lastIndexOf("/")+1);if(path.indexOf("/test")!==-1||path.indexOf("/demo")!==-1){path=path.substr(0,path.length-
1);path=path.substr(0,path.lastIndexOf("/")+1)}importLocation=path}})();Polymer({is:"code-mirror",properties:{_pendingOptions:{type:Array,value:[]},value:{type:String,notify:true,observer:"_valueChanged"},mode:{type:String,value:"htmlmixed",observer:"_modeChanged"},lineSeparator:{type:String,observer:"_lineSeparatorChanged"},theme:{type:String,value:"xq-light",observer:"_themeChanged"},tabSize:{type:Number,observer:"_tabSizeChanged"},lineNumbers:{type:Boolean,observer:"_lineNumbersChanged"},smartIndent:{type:Boolean,
observer:"_smartIndentChanged"},keyMap:{type:String,observer:"_keyMapChanged"},lineWrapping:{type:Boolean,observer:"_lineWrappingChanged"},readOnly:{type:Boolean,observer:"_readOnlyChanged"},showCursorWhenSelecting:{type:Boolean,observer:"_showCursorWhenSelectingChanged"},lineWiseCopyCut:{type:Boolean,observer:"_lineWiseCopyCutChanged"},undoDepth:{type:Number,observer:"_undoDepthChanged"},historyEventDelay:{type:Number,observer:"_historyEventDelayChanged"},autofocus:{type:Boolean,observer:"_autofocusChanged"},
editor:{type:Object,readOnly:true},_changeHandler:{value:function(){return this._onChangeEvent.bind(this)}},_beforeChangeHandler:{value:function(){return this._onBeforeChangeEvent.bind(this)}},_settingInternal:Boolean,importLocation:{type:String,value:function(){if(importLocation){importLocation=importLocation.replace("code-mirror/","codemirror/");var base=document.querySelector("base");if(base&&base.href)if(importLocation[0]==="/")importLocation=importLocation.substr(1)}return importLocation}}},
observers:["_importLocationChanegd(importLocation)"],ready:function(){if(!this.value)this.value=this.textContent.trim();try{var editor=CodeMirror(this.$.wrapper,{value:this.value,mode:this.mode,theme:this.theme});this._setEditor(editor);this._pendingOptions.forEach(function(item){this.setOption(item.option,item.value);if(item.post)try{item.post()}catch(e){}},this)}catch(e){console.error("Unable to initialize CodeMirror.",e);this.fire("error",e)}},attached:function(){if(!this.editor)return;this.editor.on("change",
this._changeHandler);this.editor.on("beforeChange",this._beforeChangeHandler);this.editor.refresh();this.focus()},detached:function(){if(!this.editor)return;this.editor.off("change",this._changeHandler);this.editor.off("beforeChange",this._beforeChangeHandler)},focus:function(){if(!this.editor)return;this.editor.focus()},setOption:function(option,value){if(!this.editor){this._pendingOptions.push({option:option,value:value});return}this.editor.setOption(option,value)},_valueChanged:function(){if(!this.editor)return;
if(this.editor.getValue()!==this.value&&this.value!==undefined&&this.value!==null)this.editor.setValue(this.value)},_modeChanged:function(){var val=this.mode;var mode;var spec;var info;var m=/.+\.([^.]+)$/.exec(val);if(m){info=CodeMirror.findModeByExtension(m[1]);if(info){mode=info.mode;spec=info.mime}}else if(/\//.test(val)){info=CodeMirror.findModeByMIME(val);if(info){mode=info.mode;spec=val}}else mode=spec=val;if(!this.editor){this._pendingOptions.push({option:"mode",value:mode,post:function(){CodeMirror.autoLoadMode(this.editor,
mode)}.bind(this)});return}if(!mode){this.setOption("mode",null);return}this.setOption("mode",spec);CodeMirror.autoLoadMode(this.editor,mode)},_themeChanged:function(newTheme){newTheme=newTheme||"xq-light";var dom=Polymer.dom(this.root);var old=dom.querySelector("[data-theme]");if(old)dom.removeChild(old);var s=document.createElement("style","custom-style");s.include=newTheme;s.dataset.theme=newTheme;dom.appendChild(s);this.setOption("theme",newTheme);this.updateStyles()},_tabSizeChanged:function(){this.setOption("tabSize",
this.tabSize)},_lineNumbersChanged:function(){this.setOption("lineNumbers",this.lineNumbers)},_lineSeparatorChanged:function(){this.setOption("lineSeparator",this.lineSeparator)},_smartIndentChanged:function(){this.setOption("smartIndent",this.smartIndent)},_keyMapChanged:function(){this.setOption("keyMap",this.keyMap)},_lineWrappingChanged:function(){this.setOption("lineWrapping",this.lineWrapping)},_readOnlyChanged:function(){this.setOption("readOnly",this.readOnly)},_showCursorWhenSelectingChanged:function(){this.setOption("showCursorWhenSelecting",
this.showCursorWhenSelecting)},_lineWiseCopyCutChanged:function(){this.setOption("lineWiseCopyCut",this.lineWiseCopyCut)},_undoDepthChanged:function(){this.setOption("undoDepth",this.undoDepth)},_historyEventDelayChanged:function(){this.setOption("historyEventDelay",this.historyEventDelay)},_autofocusChanged:function(){this.setOption("autofocus",this.autofocus)},_onChangeEvent:function(instance,changeObj){this.set("value",this.editor.getValue());this.fire("change",{change:changeObj})},_onBeforeChangeEvent:function(instance,
changeObj){var e=this.fire("before-change",{change:changeObj});if(e.detail.change.canceled)this.set("value",this.editor.getValue())},_importLocationChanegd:function(importLocation){if(importLocation[importLocation-1]!=="/")importLocation+="/";CodeMirror.modeURL=importLocation+"mode/%N/%N.js"}})})();